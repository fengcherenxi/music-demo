(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-15e37968"],{"54dc":function(t,e,s){"use strict";s.d(e,"a",(function(){return o}));var a=s("5bc3"),i=s.n(a),n=s("970b"),r=s.n(n),c=s("fa7d"),l=i()((function t(e){var s=e.id,a=e.singer,i=e.name,n=e.album,c=e.duration,l=e.image,o=e.url,u=e.playCount,d=e.score;r()(this,t),this.id=s,this.singer=a,this.name=i,this.album=n,this.duration=c,this.image=l,this.url=o,this.playCount=u,this.score=d}));function o(t){return new l({id:t.id,singer:u(t.ar||t.artists),name:t.name,album:t.al?t.al.name:t.album.name,duration:c["a"].formatSecond(t.dt||t.duration),image:t.al?t.al.picUrl:t.album.artist.img1v1Url,url:"https://music.163.com/song/media/outer/url?id=".concat(t.id,".mp3"),playCount:t.playCount||"",score:t.score||""})}function u(t){var e=[];return t?(t.map((function(t){e.push(t.name)})),e.join(" / ")):""}},"5bc3":function(t,e){function s(t,e){for(var s=0;s<e.length;s++){var a=e[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function a(t,e,a){return e&&s(t.prototype,e),a&&s(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}t.exports=a,t.exports.__esModule=!0,t.exports["default"]=t.exports},"6ef4":function(t,e,s){"use strict";s("804b")},"804b":function(t,e,s){},"970b":function(t,e){function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t.exports=s,t.exports.__esModule=!0,t.exports["default"]=t.exports},"9f09":function(t,e,s){"use strict";s("d6e5")},aa5c:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"artist-box"},[s("div",{staticClass:"tool-head"},[s("div",{staticClass:"item play-item",on:{click:t.playAllSong}},[s("i",{staticClass:"iconfont niceOutlined_Play"}),t._v(" 播放全部 ")]),t.isPerson?t._e():s("div",{staticClass:"item",class:t.subscribed?"active":"",on:{click:function(e){return t.collect()}}},[s("i",{staticClass:"iconfont niceicon-heart"}),t._v(" "+t._s(t.collectText)+" ")])]),s("table",{staticClass:"artist-table"},[t._m(0),s("tbody",t._l(t.songs,(function(e,a){return s("tr",{key:e.id,class:t.currentSong.id==e.id&&t.playing?"playing":""},[s("td",[s("div",{staticClass:"index-container flex-center"},[s("span",{staticClass:"num"},[t._v(t._s(t.utils.formatZero(a+1,2)))]),t._m(1,!0),s("i",{staticClass:"iconfont nicebofang2 play-btn",on:{click:function(s){return t.playSong(e,a)}}}),s("i",{staticClass:"iconfont nicezanting1 pause-btn",on:{click:function(s){return t.pauseSong(e,a)}}})])]),s("td",[s("div",{staticClass:"name-container"},[s("div",{staticClass:"avatar"},[s("el-image",{key:e.image+"?param=100y100",attrs:{src:e.image+"?param=100y100",lazy:""}},[s("div",{staticClass:"image-slot flex-center flex-column",attrs:{slot:"placeholder"},slot:"placeholder"},[s("i",{staticClass:"iconfont niceicon-3"})]),s("div",{staticClass:"image-slot flex-center",attrs:{slot:"error"},slot:"error"},[s("i",{staticClass:"el-icon-picture-outline"})])])],1),s("p",{staticClass:"name ellipsis",attrs:{title:e.name}},[t._v(t._s(e.name))])])]),s("td",[s("div",{staticClass:"artist-container"},[s("p",{staticClass:"author ellipsis",attrs:{title:e.singer}},[t._v(" "+t._s(e.singer)+" ")])])]),s("td",[s("div",{staticClass:"album-container"},[s("p",{staticClass:"ellipsis",attrs:{title:e.album}},[t._v(t._s(e.album))])])]),s("td",[s("div",{staticClass:"duration-container"},[s("p",[t._v(t._s(t.utils.formatSecondTime(e.duration)))]),t._m(2,!0)])])])})),0)])])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{staticClass:"th-index"},[t._v("序号")]),s("th",{staticClass:"th-name"},[t._v("歌曲")]),s("th",{staticClass:"th-artist"},[t._v("歌手")]),s("th",{staticClass:"th-album"},[t._v("专辑")]),s("th",{staticClass:"th-duration"},[t._v("时长")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"play-icon"},[s("div",{staticClass:"line",staticStyle:{"animation-delay":"-1.2s"}}),s("div",{staticClass:"line"}),s("div",{staticClass:"line",staticStyle:{"animation-delay":"-1.5s"}}),s("div",{staticClass:"line",staticStyle:{"animation-delay":"-0.9s"}}),s("div",{staticClass:"line",staticStyle:{"animation-delay":"-0.6s"}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"song-tools"},[s("i",{staticClass:"iconfont niceicon-heart",attrs:{title:"喜欢"}}),s("i",{staticClass:"iconfont nicexiazai",attrs:{title:"下载"}}),s("i",{staticClass:"iconfont nicedot",attrs:{title:"更多"}})])}],n=s("c973"),r=s.n(n),c=s("9523"),l=s.n(c),o=s("a34a"),u=s.n(o),d=s("2f62");function p(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function m(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?p(Object(s),!0).forEach((function(e){l()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):p(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var f={data:function(){return{}},props:{songs:{type:Array},subscribed:{type:Boolean},isPerson:{type:Boolean,default:!1}},components:{},computed:m(m({},Object(d["c"])(["currentIndex","playing","currentSong"])),{},{collectText:function(){return this.subscribed?"已收藏":"收藏"}}),watch:{},methods:m({playSong:function(t,e){this.selectPlay({list:this.songs,index:e})},pauseSong:function(){this.pausePlay()},playAllSong:function(){this.playAll({list:this.songs})},collect:function(){var t=this;return r()(u.a.mark((function e(){return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$emit("collectArtist");case 1:case"end":return e.stop()}}),e)})))()}},Object(d["b"])(["selectPlay","playAll","pausePlay"])),created:function(){},mounted:function(){}},v=f,h=(s("6ef4"),s("2877")),g=Object(h["a"])(v,a,i,!1,null,"404980e0",null);e["a"]=g.exports},d6e5:function(t,e,s){},ffec:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"playlist-detail container"},[s("div",{staticClass:"left shadow"},[s("div",{staticClass:"top"},[s("div",{staticClass:"avatar"},[s("img",{attrs:{src:t.detail.coverImgUrl+"?param=200y200",alt:""}})]),s("div",{staticClass:"info"},[s("div",{staticClass:"title flex-between"},[s("span",[t._v(t._s(t.detail.name))]),s("div")]),s("div",{staticClass:"user flex-row"},[s("div",{staticClass:"avatar",on:{click:function(e){return t.toUser(t.creator.userId)}}},[s("img",{attrs:{src:t.creator.avatarUrl+"?param=100y100",alt:""}})]),s("p",{staticClass:"nickname",on:{click:function(e){return t.toUser(t.creator.userId)}}},[t._v(t._s(t.creator.nickname))]),t.detail.createTime?s("p",{staticClass:"createTime"},[t._v(" "+t._s(t.utils.dateFormat(t.detail.createTime,"YYYY-MM-DD"))+"创建 ")]):t._e()]),t.detail.tags&&t.detail.tags.length>0?s("div",{staticClass:"tag flex-row"},[t._v(" 标签："),t._l(t.detail.tags,(function(e){return s("a",{key:e,on:{click:function(s){return t.tag(e)}}},[t._v(t._s(e))])}))],2):t._e(),s("div",{staticClass:"desc"},[s("p",{staticClass:"ellipsis-two",domProps:{innerHTML:t._s(t.detail.description)}}),t.txtLength(t.detail.description)>50?s("span",{staticClass:"flex-row",on:{click:function(e){return t.openDesc(t.detail.name,t.detail.description)}}},[t._v("全部"),s("i",{staticClass:"iconfont niceiconfontyoujiantou-copy-copy-copy-copy"})]):t._e()])])]),s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"content"},[s("artist-list",{attrs:{songs:t.songs,isPerson:!!t.ordered,subscribed:t.detail.subscribed},on:{collectArtist:t.collectArtist}})],1)]),s("div",{staticClass:"right"},[s("div",{staticClass:"like module shadow"},[t._m(0),t.subscribers.length>0?s("ul",t._l(t.subscribers,(function(e){return s("li",{key:e.userId},[s("div",{staticClass:"avatar",on:{click:function(s){return t.toUser(e.userId)}}},[s("img",{attrs:{src:e.avatarUrl+"?param=150y150",alt:e.nickname,title:e.nickname}})])])})),0):s("p",{staticClass:"no-data-text",staticStyle:{"padding-bottom":"10px"}},[t._v("还没有人喜欢")])]),s("div",{staticClass:"related module shadow"},[t._m(1),s("ul",t._l(t.relatedList,(function(e){return s("li",{key:e.id,on:{click:function(s){return t.toDetail(e.id)}}},[s("div",{staticClass:"avatar"},[s("img",{attrs:{src:e.coverImgUrl+"?param=150y150",alt:e.nickname,title:e.nickname}})]),s("div",{staticClass:"info"},[s("h2",{staticClass:"ellipsis",attrs:{title:e.name}},[t._v(t._s(e.name))]),s("span",[t._v("By. "),s("small",[t._v(" "+t._s(e.creator.nickname))])])])])})),0)]),s("div",{staticClass:"comment module shadow"},[t._m(2),t.comments.length>0?s("ul",t._l(t.comments,(function(e){return s("li",{key:e.time,staticClass:"item"},[s("div",{staticClass:"avatar",on:{click:function(s){return t.toUser(e.user.userId)}}},[s("img",{attrs:{src:e.user.avatarUrl+"?param=150y150",alt:e.user.nickname,title:e.user.nickname}})]),s("div",{staticClass:"info"},[s("h2",{on:{click:function(s){return t.toUser(e.user.userId)}}},[t._v(" "+t._s(e.user.nickname)),s("small",[t._v(" · "+t._s(t.utils.formatMsgTime(e.time)))])]),s("p",[t._v(t._s(e.content))])])])})),0):s("p",{staticClass:"no-data-text",staticStyle:{"padding-bottom":"10px"}},[t._v("还没有人评论")])])])])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-header flex-row"},[s("span",[t._v("喜欢这个歌单的人")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-header flex-row"},[s("span",[t._v("相关推荐")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-header flex-row"},[s("span",[t._v("精彩评论")])])}],n=s("c973"),r=s.n(n),c=s("a34a"),l=s.n(c),o=s("54dc"),u=s("aa5c"),d={data:function(){return{detail:{},creator:{},subscribers:[],relatedList:[],simiList:[],comments:[],songs:[],s:32,artistId:"",loading:!1,ordered:!1}},components:{ArtistList:u["a"]},computed:{txtLength:function(){return function(t){if(t)return t.length}}},watch:{$route:function(t,e){console.log(t,e);var s=this.$route.query.id||this.singer.id;s&&this._initialize(s)}},methods:{tag:function(t){this.$router.push({name:"playlist",query:{cat:t}})},getPlayListDetail:function(t,e){var s=this;return r()(l.a.mark((function a(){var i,n,r,c,o,u;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=(new Date).valueOf(),a.prev=1,a.next=4,s.$api.getPlayListDetail(t,e,i);case 4:if(n=a.sent,200===n.code){for(null!==n.playlist.description&&(n.playlist.description=n.playlist.description.replace(/(\r\n|\n|\r)/gm,"<br />")),s.detail=n.playlist,s.creator=n.playlist.creator,r=n.playlist.trackIds,c=1e3,o=[],u=0;u<r.length;u+=c)o.push(r.slice(u,u+c));s.getSongDetail(o)}a.next=10;break;case 8:a.prev=8,a.t0=a["catch"](1);case 10:case"end":return a.stop()}}),a,null,[[1,8]])})))()},getSongDetail:function(t){var e=this;return r()(l.a.mark((function s(){var a,i,n,r,c,o,u,d,p,m;return l.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(e.loading=!0,a=t[0],i=t[1],n=(new Date).valueOf(),r=[],c=[],a.map((function(t){r.push(t.id)})),r=r.join(","),i&&(i.map((function(t){c.push(t.id)})),c=c.join(",")),s.prev=9,!i){s.next=21;break}return s.next=13,e.$api.getSongDetail(r,n);case 13:return o=s.sent,s.next=16,e.$api.getSongDetail(c,n+1);case 16:u=s.sent,d=o.songs.concat(u.songs),e.songs=e._normalizeSongs(d),s.next=26;break;case 21:return s.next=23,e.$api.getSongDetail(r,n);case 23:p=s.sent,m=p.songs,e.songs=e._normalizeSongs(m);case 26:e.loading=!1,s.next=31;break;case 29:s.prev=29,s.t0=s["catch"](9);case 31:case"end":return s.stop()}}),s,null,[[9,29]])})))()},getRelatedPlaylist:function(t){var e=this;return r()(l.a.mark((function s(){var a;return l.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,e.$api.getRelatedPlaylist(t);case 3:a=s.sent,200===a.code&&(e.relatedList=a.playlists),s.next=9;break;case 7:s.prev=7,s.t0=s["catch"](0);case 9:case"end":return s.stop()}}),s,null,[[0,7]])})))()},getSubscribersPlaylist:function(t){var e=this;return r()(l.a.mark((function s(){var a,i;return l.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a={id:t,limit:28,offset:0},s.prev=1,s.next=4,e.$api.getSubscribersPlaylist(a);case 4:i=s.sent,200===i.code&&(e.subscribers=i.subscribers),s.next=10;break;case 8:s.prev=8,s.t0=s["catch"](1);case 10:case"end":return s.stop()}}),s,null,[[1,8]])})))()},getCommentPlaylist:function(t){var e=this;return r()(l.a.mark((function s(){var a,i;return l.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a={id:t,limit:28,offset:0},s.prev=1,s.next=4,e.$api.getCommentPlaylist(a);case 4:i=s.sent,200===i.code&&(i.hotComments.length>0?e.comments=i.hotComments:e.comments=i.comments),s.next=10;break;case 8:s.prev=8,s.t0=s["catch"](1);case 10:case"end":return s.stop()}}),s,null,[[1,8]])})))()},_normalizeSongs:function(t){var e=[];return t.map((function(t){t.id&&e.push(Object(o["a"])(t))})),e},openDesc:function(t,e){this.$alert(e,t,{closeOnClickModal:!0,customClass:"descBox",showConfirmButton:!1,dangerouslyUseHTMLString:!0})},collectArtist:function(){var t=this;return r()(l.a.mark((function e(){var s,a,i;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.detail.subscribed?2:1,a=t.detail.subscribed?"已取消收藏":"收藏成功",e.prev=2,e.next=5,t.$api.collectPlaylist(s,t.artistId);case 5:i=e.sent,200===i.code&&(t.$message({message:a,type:"success"}),setTimeout((function(){t.getPlayListDetail(t.artistId,100)}),300)),e.next=11;break;case 9:e.prev=9,e.t0=e["catch"](2);case 11:case"end":return e.stop()}}),e,null,[[2,9]])})))()},toDetail:function(t){this.$router.push({name:"playlistDetail",query:{id:t}})},toUser:function(t){this.$router.push({name:"personal",query:{id:t}})},_initialize:function(t){this.getPlayListDetail(t,100),this.getRelatedPlaylist(t),this.getSubscribersPlaylist(t),this.getCommentPlaylist(t)}},created:function(){},mounted:function(){var t=this.$route.query.id;this.artistId=t,t&&this._initialize(t)}},p=d,m=(s("9f09"),s("2877")),f=Object(m["a"])(p,a,i,!1,null,"46dd12fc",null);e["default"]=f.exports}}]);
//# sourceMappingURL=chunk-15e37968.5bb83e57.js.map